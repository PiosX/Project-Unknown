"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var i=0;i<t.length;i++){var s=t[i];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,i){return t&&_defineProperties(e.prototype,t),i&&_defineProperties(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}var VanillaTilt=function(){var e=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(_classCallCheck(this,i),!(e instanceof Node))throw"Can't initialize VanillaTilt because "+e+" is not a Node.";this.width=null,this.height=null,this.clientWidth=null,this.clientHeight=null,this.left=null,this.top=null,this.gammazero=null,this.betazero=null,this.lastgammazero=null,this.lastbetazero=null,this.transitionTimeout=null,this.updateCall=null,this.event=null,this.updateBind=this.update.bind(this),this.resetBind=this.reset.bind(this),this.element=e,this.settings=this.extendSettings(t),this.reverse=this.settings.reverse?-1:1,this.glare=i.isSettingTrue(this.settings.glare),this.glarePrerender=i.isSettingTrue(this.settings["glare-prerender"]),this.fullPageListening=i.isSettingTrue(this.settings["full-page-listening"]),this.gyroscope=i.isSettingTrue(this.settings.gyroscope),this.gyroscopeSamples=this.settings.gyroscopeSamples,this.elementListener=this.getElementListener(),this.glare&&this.prepareGlare(),this.fullPageListening&&this.updateClientSize(),this.addEventListeners(),this.reset(),this.updateInitialPosition()}return _createClass(i,[{key:"getElementListener",value:function(){if(this.fullPageListening)return window.document;if("string"==typeof this.settings["mouse-event-element"]){var e=document.querySelector(this.settings["mouse-event-element"]);if(e)return e}return this.settings["mouse-event-element"]instanceof Node?this.settings["mouse-event-element"]:this.element}},{key:"addEventListeners",value:function(){this.onMouseEnterBind=this.onMouseEnter.bind(this),this.onMouseMoveBind=this.onMouseMove.bind(this),this.onMouseLeaveBind=this.onMouseLeave.bind(this),this.onWindowResizeBind=this.onWindowResize.bind(this),this.onDeviceOrientationBind=this.onDeviceOrientation.bind(this),this.elementListener.addEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.addEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.addEventListener("mousemove",this.onMouseMoveBind),(this.glare||this.fullPageListening)&&window.addEventListener("resize",this.onWindowResizeBind),this.gyroscope&&window.addEventListener("deviceorientation",this.onDeviceOrientationBind)}},{key:"removeEventListeners",value:function(){this.elementListener.removeEventListener("mouseenter",this.onMouseEnterBind),this.elementListener.removeEventListener("mouseleave",this.onMouseLeaveBind),this.elementListener.removeEventListener("mousemove",this.onMouseMoveBind),this.gyroscope&&window.removeEventListener("deviceorientation",this.onDeviceOrientationBind),(this.glare||this.fullPageListening)&&window.removeEventListener("resize",this.onWindowResizeBind)}},{key:"destroy",value:function(){clearTimeout(this.transitionTimeout),null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.reset(),this.removeEventListeners(),this.element.vanillaTilt=null,delete this.element.vanillaTilt,this.element=null}},{key:"onDeviceOrientation",value:function(e){var t,i;null!==e.gamma&&null!==e.beta&&(this.updateElementPosition(),0<this.gyroscopeSamples&&(this.lastgammazero=this.gammazero,this.lastbetazero=this.betazero,null===this.gammazero?(this.gammazero=e.gamma,this.betazero=e.beta):(this.gammazero=(e.gamma+this.lastgammazero)/2,this.betazero=(e.beta+this.lastbetazero)/2),--this.gyroscopeSamples),i=this.settings.gyroscopeMaxAngleX-this.settings.gyroscopeMinAngleX,t=this.settings.gyroscopeMaxAngleY-this.settings.gyroscopeMinAngleY,i=i/this.width,t=t/this.height,i=(e.gamma-(this.settings.gyroscopeMinAngleX+this.gammazero))/i,e=(e.beta-(this.settings.gyroscopeMinAngleY+this.betazero))/t,null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event={clientX:i+this.left,clientY:e+this.top},this.updateCall=requestAnimationFrame(this.updateBind))}},{key:"onMouseEnter",value:function(){this.updateElementPosition(),this.element.style.willChange="transform",this.setTransition()}},{key:"onMouseMove",value:function(e){null!==this.updateCall&&cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.updateBind)}},{key:"onMouseLeave",value:function(){this.setTransition(),this.settings.reset&&requestAnimationFrame(this.resetBind)}},{key:"reset",value:function(){this.event={clientX:this.left+this.width/2,clientY:this.top+this.height/2},this.element&&this.element.style&&(this.element.style.transform="perspective(".concat(this.settings.perspective,"px) ")+"rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)"),this.resetGlare()}},{key:"resetGlare",value:function(){this.glare&&(this.glareElement.style.transform="rotate(180deg) translate(-50%, -50%)",this.glareElement.style.opacity="0")}},{key:"updateInitialPosition",value:function(){var e;0===this.settings.startX&&0===this.settings.startY||(this.onMouseEnter(),this.fullPageListening?this.event={clientX:(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.clientWidth,clientY:(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.clientHeight}:this.event={clientX:this.left+(this.settings.startX+this.settings.max)/(2*this.settings.max)*this.width,clientY:this.top+(this.settings.startY+this.settings.max)/(2*this.settings.max)*this.height},e=this.settings.scale,this.settings.scale=1,this.update(),this.settings.scale=e,this.resetGlare())}},{key:"getValues",value:function(){var e=this.fullPageListening?(t=this.event.clientX/this.clientWidth,this.event.clientY/this.clientHeight):(t=(this.event.clientX-this.left)/this.width,(this.event.clientY-this.top)/this.height),t=Math.min(Math.max(t,0),1);return e=Math.min(Math.max(e,0),1),{tiltX:(this.reverse*(this.settings.max-t*this.settings.max*2)).toFixed(2),tiltY:(this.reverse*(e*this.settings.max*2-this.settings.max)).toFixed(2),percentageX:100*t,percentageY:100*e,angle:Math.atan2(this.event.clientX-(this.left+this.width/2),-(this.event.clientY-(this.top+this.height/2)))*(180/Math.PI)}}},{key:"updateElementPosition",value:function(){var e=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=e.left,this.top=e.top}},{key:"update",value:function(){var e=this.getValues();this.element.style.transform="perspective("+this.settings.perspective+"px) rotateX("+("x"===this.settings.axis?0:e.tiltY)+"deg) rotateY("+("y"===this.settings.axis?0:e.tiltX)+"deg) scale3d("+this.settings.scale+", "+this.settings.scale+", "+this.settings.scale+")",this.glare&&(this.glareElement.style.transform="rotate(".concat(e.angle,"deg) translate(-50%, -50%)"),this.glareElement.style.opacity="".concat(e.percentageY*this.settings["max-glare"]/100)),this.element.dispatchEvent(new CustomEvent("tiltChange",{detail:e})),this.updateCall=null}},{key:"prepareGlare",value:function(){var e,t;this.glarePrerender||((e=document.createElement("div")).classList.add("js-tilt-glare"),(t=document.createElement("div")).classList.add("js-tilt-glare-inner"),e.appendChild(t),this.element.appendChild(e)),this.glareElementWrapper=this.element.querySelector(".js-tilt-glare"),this.glareElement=this.element.querySelector(".js-tilt-glare-inner"),this.glarePrerender||(Object.assign(this.glareElementWrapper.style,{position:"absolute",top:"0",left:"0",width:"100%",height:"100%",overflow:"hidden","pointer-events":"none"}),Object.assign(this.glareElement.style,{position:"absolute",top:"50%",left:"50%","pointer-events":"none","background-image":"linear-gradient(0deg, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 100%)",transform:"rotate(180deg) translate(-50%, -50%)","transform-origin":"0% 0%",opacity:"0"}),this.updateGlareSize())}},{key:"updateGlareSize",value:function(){var e;this.glare&&(e=2*(this.element.offsetWidth>this.element.offsetHeight?this.element.offsetWidth:this.element.offsetHeight),Object.assign(this.glareElement.style,{width:"".concat(e,"px"),height:"".concat(e,"px")}))}},{key:"updateClientSize",value:function(){this.clientWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,this.clientHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight}},{key:"onWindowResize",value:function(){this.updateGlareSize(),this.updateClientSize()}},{key:"setTransition",value:function(){var e=this;clearTimeout(this.transitionTimeout),this.element.style.transition=this.settings.speed+"ms "+this.settings.easing,this.glare&&(this.glareElement.style.transition="opacity ".concat(this.settings.speed,"ms ").concat(this.settings.easing)),this.transitionTimeout=setTimeout(function(){e.element.style.transition="",e.glare&&(e.glareElement.style.transition="")},this.settings.speed)}},{key:"extendSettings",value:function(e){var t,i={reverse:!1,max:15,startX:0,startY:0,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:1,speed:300,transition:!0,axis:null,glare:!1,"max-glare":1,"glare-prerender":!1,"full-page-listening":!1,"mouse-event-element":null,reset:!0,gyroscope:!0,gyroscopeMinAngleX:-45,gyroscopeMaxAngleX:45,gyroscopeMinAngleY:-45,gyroscopeMaxAngleY:45,gyroscopeSamples:10},s={};for(t in i)if(t in e)s[t]=e[t];else if(this.element.hasAttribute("data-tilt-"+t)){var n=this.element.getAttribute("data-tilt-"+t);try{s[t]=JSON.parse(n)}catch(e){s[t]=n}}else s[t]=i[t];return s}}],[{key:"isSettingTrue",value:function(e){return""===e||!0===e||1===e}},{key:"init",value:function(e,t){(e=(e=e instanceof Node?[e]:e)instanceof NodeList?[].slice.call(e):e)instanceof Array&&e.forEach(function(e){"vanillaTilt"in e||(e.vanillaTilt=new i(e,t))})}}]),i}();return"undefined"!=typeof document&&(window.VanillaTilt=e).init(document.querySelectorAll("[data-tilt]")),e}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInZhbmlsbGEtdGlsdC5qcyJdLCJuYW1lcyI6WyJWYW5pbGxhVGlsdCIsImVsZW1lbnQiLCJzZXR0aW5ncyIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIl9jbGFzc0NhbGxDaGVjayIsInRoaXMiLCJOb2RlIiwid2lkdGgiLCJoZWlnaHQiLCJjbGllbnRXaWR0aCIsImNsaWVudEhlaWdodCIsImxlZnQiLCJ0b3AiLCJnYW1tYXplcm8iLCJiZXRhemVybyIsImxhc3RnYW1tYXplcm8iLCJsYXN0YmV0YXplcm8iLCJ0cmFuc2l0aW9uVGltZW91dCIsInVwZGF0ZUNhbGwiLCJldmVudCIsInVwZGF0ZUJpbmQiLCJ1cGRhdGUiLCJiaW5kIiwicmVzZXRCaW5kIiwiZXh0ZW5kU2V0dGluZ3MiLCJyZXZlcnNlIiwiZ2xhcmUiLCJnbGFyZVByZXJlbmRlciIsImZ1bGxQYWdlTGlzdGVuaW5nIiwiZ3lyb3Njb3BlIiwiZWxlbWVudExpc3RlbmVyIiwiaXNTZXR0aW5nVHJ1ZSIsImdldEVsZW1lbnRMaXN0ZW5lciIsImd5cm9zY29wZVNhbXBsZXMiLCJwcmVwYXJlR2xhcmUiLCJ1cGRhdGVDbGllbnRTaXplIiwiYWRkRXZlbnRMaXN0ZW5lcnMiLCJyZXNldCIsInVwZGF0ZUluaXRpYWxQb3NpdGlvbiIsIl9jcmVhdGVDbGFzcyIsImtleSIsInZhbHVlIiwid2luZG93IiwibW91c2VFdmVudEVsZW1lbnQiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJvbk1vdXNlRW50ZXJCaW5kIiwib25EZXZpY2VPcmllbnRhdGlvbkJpbmQiLCJvbkRldmljZU9yaWVudGF0aW9uIiwib25Nb3VzZU1vdmVCaW5kIiwiYWRkRXZlbnRMaXN0ZW5lciIsIm9uTW91c2VMZWF2ZUJpbmQiLCJvbldpbmRvd1Jlc2l6ZUJpbmQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiY2xlYXJUaW1lb3V0IiwidmFuaWxsYVRpbHQiLCJjYW5jZWxBbmltYXRpb25GcmFtZSIsInJlbW92ZUV2ZW50TGlzdGVuZXJzIiwidG90YWxBbmdsZVkiLCJkZWdyZWVzUGVyUGl4ZWxZIiwicmVxdWVzdEFuaW1hdGlvbkZyYW1lIiwiYW5nbGVZIiwiYmV0YSIsInVwZGF0ZUVsZW1lbnRQb3NpdGlvbiIsImNsaWVudFkiLCJnYW1tYSIsInRvdGFsQW5nbGVYIiwiZ3lyb3Njb3BlTWF4QW5nbGVYIiwiZ3lyb3Njb3BlTWluQW5nbGVYIiwiZ3lyb3Njb3BlTWluQW5nbGVZIiwiZGVncmVlc1BlclBpeGVsWCIsInBvc1kiLCJjbGllbnRYIiwic3R5bGUiLCJ3aWxsQ2hhbmdlIiwic2V0VHJhbnNpdGlvbiIsInRyYW5zZm9ybSIsImNvbmNhdCIsImJhY2t1cFNjYWxlIiwicmVzZXRHbGFyZSIsImdsYXJlRWxlbWVudCIsIngiLCJ5Iiwic3RhcnRYIiwic3RhcnRZIiwib25Nb3VzZUVudGVyIiwidGlsdFgiLCJ0aWx0WSIsInBlcmNlbnRhZ2VYIiwibWF4IiwicGVyY2VudGFnZVkiLCJhbmdsZSIsInJlY3QiLCJ2YWx1ZXMiLCJnZXRWYWx1ZXMiLCJzY2FsZSIsImRldGFpbCIsIk1hdGgiLCJtaW4iLCJqc1RpbHRHbGFyZSIsImNsYXNzTGlzdCIsImFkZCIsImFwcGVuZENoaWxkIiwidG9GaXhlZCIsIm92ZXJmbG93IiwiYXRhbjIiLCJwb3NpdGlvbiIsImdldEJvdW5kaW5nQ2xpZW50UmVjdCIsIm9mZnNldFdpZHRoIiwib2Zmc2V0SGVpZ2h0Iiwib3BhY2l0eSIsIk9iamVjdCIsImFzc2lnbiIsImF4aXMiLCJDdXN0b21FdmVudCIsInRyYW5zaXRpb24iLCJqc1RpbHRHbGFyZUlubmVyIiwiY3JlYXRlRWxlbWVudCIsImdsYXJlRWxlbWVudFdyYXBwZXIiLCJkZWZhdWx0U2V0dGluZ3MiLCJwZXJzcGVjdGl2ZSIsImVhc2luZyIsInBvaW50ZXItZXZlbnRzIiwiYmFja2dyb3VuZC1pbWFnZSIsImd5cm9zY29wZU1heEFuZ2xlWSIsImdsYXJlU2l6ZSIsImhhc0F0dHJpYnV0ZSIsInByb3BlcnR5IiwibmV3U2V0dGluZ3MiLCJpbm5lcldpZHRoIiwiZG9jdW1lbnRFbGVtZW50IiwiYm9keSIsImlubmVySGVpZ2h0Iiwic2V0dGluZyIsInVwZGF0ZUdsYXJlU2l6ZSIsIl90aGlzIiwiZWxlbWVudHMiLCJzcGVlZCIsInNldFRpbWVvdXQiLCJtYXgtZ2xhcmUiLCJnbGFyZS1wcmVyZW5kZXIiLCJmdWxsLXBhZ2UtbGlzdGVuaW5nIiwibW91c2UtZXZlbnQtZWxlbWVudCIsImF0dHJpYnV0ZSIsImdldEF0dHJpYnV0ZSIsIkpTT04iLCJwYXJzZSIsImUiLCJOb2RlTGlzdCIsInNsaWNlIiwiY2FsbCIsIkFycmF5IiwiZm9yRWFjaCIsImluaXQiLCJxdWVyeVNlbGVjdG9yQWxsIl0sIm1hcHBpbmdzIjoic2NBQUEsSUFBSUEsWUFBZSxXQUFZLElBRzlCQSxFQUg4QixXQUkvQixTQUFBQSxFQUFBQyxHQUFBLElBQUFDLEVBQUEsRUFBQUMsVUFBQUMsYUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUEsR0FDQSxHQURBRyxnQkFBQUMsS0FBQVAsS0FDQUMsYUFBQU8sTUFDQSxLQUNBLHdDQUNBUCxFQVFLLGtCQUlGTSxLQUFLRSxNQUFRLEtBVHNCRixLQUFBRyxPQUFBLEtBV25DSCxLQUFLSSxZQUFjLEtBVm5CSixLQUFBSyxhQUFhLEtBQ1pMLEtBQUFNLEtBQ0MsS0FJRE4sS0FBQU8sSUFBQSxLQUdEUCxLQUFBUSxVQUFjLEtBQ2RSLEtBQUFTLFNBQUtMLEtBQ0xKLEtBQUFVLGNBQUEsS0FDQVYsS0FBQVcsYUFBQSxLQVNBWCxLQUFLWSxrQkFBb0IsS0FMekJaLEtBQUFhLFdBQUEsS0FDQWIsS0FBQWMsTUFBS0wsS0FFTFQsS0FBQWUsV0FBS0osS0FBZUssT0FBcEJDLEtBQUFqQixNQUVBQSxLQUFBa0IsVUFBS04sS0FBQUEsTUFBb0JLLEtBQXpCakIsTUFFQUEsS0FBQU4sUUFBQUEsRUFFQU0sS0FBQUwsU0FBS29CLEtBQWFJLGVBQVlGLEdBRzlCakIsS0FBQW9CLFFBQUFwQixLQUFlTixTQUFmMEIsU0FB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QUFBLENBQUF4RixJQUFBLGdCQUFBQyxNQXlFN0IsU0FBQTRGLEdBQ0YsTUFBQSxLQUFBQSxJQUFBLElBQUFBLEdBQUEsSUFBQUEsSUExRStCLENBQUE3RixJQUFBLE9BQUFDLE1BMmpCN0IsU0FBWStGLEVBQVV4SSxJQU1wQndJLEdBSkFBLEVBREdBLGFBQW9CbEksS0FDWixDQUFDa0ksR0FHVEEsYUFBb0JZLFNBQ1osR0FBR0MsTUFBTUMsS0FBS2QsR0FHcEJBLGFBQW9CZSxPQUkxQmYsRUFBU2dCLFFBQVEsU0FBQ3pKLEdBQ1gsZ0JBQWlCQSxJQUN0QkEsRUFBUXdELFlBQWMsSUFBSXpELEVBQVlDLEVBQVNDLFVBMWtCckJGLEVBQUEsR0EwbEI5QixNQVZ3QixvQkFBYjhDLFdBRVZGLE9BQU81QyxZQUFjQSxHQUtUMkosS0FBSzdHLFNBQVM4RyxpQkFBaUIsZ0JBR3JDNUosRUExbEJXIiwiZmlsZSI6InZhbmlsbGEtdGlsdC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyJ2YXIgVmFuaWxsYVRpbHQgPSAoZnVuY3Rpb24gKCkge1xyXG5cdFwidXNlIHN0cmljdFwiO1xyXG5cclxuXHQvKipcclxuXHQgKiBDcmVhdGVkIGJ5IFNlcmdpdSDImGFuZG9yIChtaWNrdTd6dSkgb24gMS8yNy8yMDE3LlxyXG5cdCAqIE9yaWdpbmFsIGlkZWE6IGh0dHBzOi8vZ2l0aHViLmNvbS9naWpzcm9nZS90aWx0LmpzXHJcblx0ICogTUlUIExpY2Vuc2UuXHJcblx0ICogVmVyc2lvbiAxLjcuMlxyXG5cdCAqL1xyXG5cclxuXHRjbGFzcyBWYW5pbGxhVGlsdCB7XHJcblx0XHRjb25zdHJ1Y3RvcihlbGVtZW50LCBzZXR0aW5ncyA9IHt9KSB7XHJcblx0XHRcdGlmICghKGVsZW1lbnQgaW5zdGFuY2VvZiBOb2RlKSkge1xyXG5cdFx0XHRcdHRocm93IChcclxuXHRcdFx0XHRcdFwiQ2FuJ3QgaW5pdGlhbGl6ZSBWYW5pbGxhVGlsdCBiZWNhdXNlIFwiICtcclxuXHRcdFx0XHRcdGVsZW1lbnQgK1xyXG5cdFx0XHRcdFx0XCIgaXMgbm90IGEgTm9kZS5cIlxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMud2lkdGggPSBudWxsO1xyXG5cdFx0XHR0aGlzLmhlaWdodCA9IG51bGw7XHJcblx0XHRcdHRoaXMuY2xpZW50V2lkdGggPSBudWxsO1xyXG5cdFx0XHR0aGlzLmNsaWVudEhlaWdodCA9IG51bGw7XHJcblx0XHRcdHRoaXMubGVmdCA9IG51bGw7XHJcblx0XHRcdHRoaXMudG9wID0gbnVsbDtcclxuXHJcblx0XHRcdC8vIGZvciBHeXJvc2NvcGUgc2FtcGxpbmdcclxuXHRcdFx0dGhpcy5nYW1tYXplcm8gPSBudWxsO1xyXG5cdFx0XHR0aGlzLmJldGF6ZXJvID0gbnVsbDtcclxuXHRcdFx0dGhpcy5sYXN0Z2FtbWF6ZXJvID0gbnVsbDtcclxuXHRcdFx0dGhpcy5sYXN0YmV0YXplcm8gPSBudWxsO1xyXG5cclxuXHRcdFx0dGhpcy50cmFuc2l0aW9uVGltZW91dCA9IG51bGw7XHJcblx0XHRcdHRoaXMudXBkYXRlQ2FsbCA9IG51bGw7XHJcblx0XHRcdHRoaXMuZXZlbnQgPSBudWxsO1xyXG5cclxuXHRcdFx0dGhpcy51cGRhdGVCaW5kID0gdGhpcy51cGRhdGUuYmluZCh0aGlzKTtcclxuXHRcdFx0dGhpcy5yZXNldEJpbmQgPSB0aGlzLnJlc2V0LmJpbmQodGhpcyk7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQgPSBlbGVtZW50O1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzID0gdGhpcy5leHRlbmRTZXR0aW5ncyhzZXR0aW5ncyk7XHJcblxyXG5cdFx0XHR0aGlzLnJldmVyc2UgPSB0aGlzLnNldHRpbmdzLnJldmVyc2UgPyAtMSA6IDE7XHJcblx0XHRcdHRoaXMuZ2xhcmUgPSBWYW5pbGxhVGlsdC5pc1NldHRpbmdUcnVlKHRoaXMuc2V0dGluZ3MuZ2xhcmUpO1xyXG5cdFx0XHR0aGlzLmdsYXJlUHJlcmVuZGVyID0gVmFuaWxsYVRpbHQuaXNTZXR0aW5nVHJ1ZShcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzW1wiZ2xhcmUtcHJlcmVuZGVyXCJdXHJcblx0XHRcdCk7XHJcblx0XHRcdHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcgPSBWYW5pbGxhVGlsdC5pc1NldHRpbmdUcnVlKFxyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3NbXCJmdWxsLXBhZ2UtbGlzdGVuaW5nXCJdXHJcblx0XHRcdCk7XHJcblx0XHRcdHRoaXMuZ3lyb3Njb3BlID0gVmFuaWxsYVRpbHQuaXNTZXR0aW5nVHJ1ZSh0aGlzLnNldHRpbmdzLmd5cm9zY29wZSk7XHJcblx0XHRcdHRoaXMuZ3lyb3Njb3BlU2FtcGxlcyA9IHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlU2FtcGxlcztcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudExpc3RlbmVyID0gdGhpcy5nZXRFbGVtZW50TGlzdGVuZXIoKTtcclxuXHJcblx0XHRcdGlmICh0aGlzLmdsYXJlKSB7XHJcblx0XHRcdFx0dGhpcy5wcmVwYXJlR2xhcmUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcpIHtcclxuXHRcdFx0XHR0aGlzLnVwZGF0ZUNsaWVudFNpemUoKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5hZGRFdmVudExpc3RlbmVycygpO1xyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblx0XHRcdHRoaXMudXBkYXRlSW5pdGlhbFBvc2l0aW9uKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0c3RhdGljIGlzU2V0dGluZ1RydWUoc2V0dGluZykge1xyXG5cdFx0XHRyZXR1cm4gc2V0dGluZyA9PT0gXCJcIiB8fCBzZXR0aW5nID09PSB0cnVlIHx8IHNldHRpbmcgPT09IDE7XHJcblx0XHR9XHJcblxyXG5cdFx0LyoqXHJcblx0XHQgKiBNZXRob2QgcmV0dXJucyBlbGVtZW50IHdoYXQgd2lsbCBiZSBsaXN0ZW4gbW91c2UgZXZlbnRzXHJcblx0XHQgKiBAcmV0dXJuIHtOb2RlfVxyXG5cdFx0ICovXHJcblx0XHRnZXRFbGVtZW50TGlzdGVuZXIoKSB7XHJcblx0XHRcdGlmICh0aGlzLmZ1bGxQYWdlTGlzdGVuaW5nKSB7XHJcblx0XHRcdFx0cmV0dXJuIHdpbmRvdy5kb2N1bWVudDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHR5cGVvZiB0aGlzLnNldHRpbmdzW1wibW91c2UtZXZlbnQtZWxlbWVudFwiXSA9PT0gXCJzdHJpbmdcIikge1xyXG5cdFx0XHRcdGNvbnN0IG1vdXNlRXZlbnRFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0XHRcdHRoaXMuc2V0dGluZ3NbXCJtb3VzZS1ldmVudC1lbGVtZW50XCJdXHJcblx0XHRcdFx0KTtcclxuXHJcblx0XHRcdFx0aWYgKG1vdXNlRXZlbnRFbGVtZW50KSB7XHJcblx0XHRcdFx0XHRyZXR1cm4gbW91c2VFdmVudEVsZW1lbnQ7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAodGhpcy5zZXR0aW5nc1tcIm1vdXNlLWV2ZW50LWVsZW1lbnRcIl0gaW5zdGFuY2VvZiBOb2RlKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRoaXMuc2V0dGluZ3NbXCJtb3VzZS1ldmVudC1lbGVtZW50XCJdO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRyZXR1cm4gdGhpcy5lbGVtZW50O1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTWV0aG9kIHNldCBsaXN0ZW4gbWV0aG9kcyBmb3IgdGhpcy5lbGVtZW50TGlzdGVuZXJcclxuXHRcdCAqIEByZXR1cm4ge05vZGV9XHJcblx0XHQgKi9cclxuXHRcdGFkZEV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0XHR0aGlzLm9uTW91c2VFbnRlckJpbmQgPSB0aGlzLm9uTW91c2VFbnRlci5iaW5kKHRoaXMpO1xyXG5cdFx0XHR0aGlzLm9uTW91c2VNb3ZlQmluZCA9IHRoaXMub25Nb3VzZU1vdmUuYmluZCh0aGlzKTtcclxuXHRcdFx0dGhpcy5vbk1vdXNlTGVhdmVCaW5kID0gdGhpcy5vbk1vdXNlTGVhdmUuYmluZCh0aGlzKTtcclxuXHRcdFx0dGhpcy5vbldpbmRvd1Jlc2l6ZUJpbmQgPSB0aGlzLm9uV2luZG93UmVzaXplLmJpbmQodGhpcyk7XHJcblx0XHRcdHRoaXMub25EZXZpY2VPcmllbnRhdGlvbkJpbmQgPSB0aGlzLm9uRGV2aWNlT3JpZW50YXRpb24uYmluZCh0aGlzKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFx0XCJtb3VzZWVudGVyXCIsXHJcblx0XHRcdFx0dGhpcy5vbk1vdXNlRW50ZXJCaW5kXHJcblx0XHRcdCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFx0XCJtb3VzZWxlYXZlXCIsXHJcblx0XHRcdFx0dGhpcy5vbk1vdXNlTGVhdmVCaW5kXHJcblx0XHRcdCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudExpc3RlbmVyLmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFx0XCJtb3VzZW1vdmVcIixcclxuXHRcdFx0XHR0aGlzLm9uTW91c2VNb3ZlQmluZFxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuZ2xhcmUgfHwgdGhpcy5mdWxsUGFnZUxpc3RlbmluZykge1xyXG5cdFx0XHRcdHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKFwicmVzaXplXCIsIHRoaXMub25XaW5kb3dSZXNpemVCaW5kKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKHRoaXMuZ3lyb3Njb3BlKSB7XHJcblx0XHRcdFx0d2luZG93LmFkZEV2ZW50TGlzdGVuZXIoXHJcblx0XHRcdFx0XHRcImRldmljZW9yaWVudGF0aW9uXCIsXHJcblx0XHRcdFx0XHR0aGlzLm9uRGV2aWNlT3JpZW50YXRpb25CaW5kXHJcblx0XHRcdFx0KTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTWV0aG9kIHJlbW92ZSBldmVudCBsaXN0ZW5lcnMgZnJvbSBjdXJyZW50IHRoaXMuZWxlbWVudExpc3RlbmVyXHJcblx0XHQgKi9cclxuXHRcdHJlbW92ZUV2ZW50TGlzdGVuZXJzKCkge1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFwibW91c2VlbnRlclwiLFxyXG5cdFx0XHRcdHRoaXMub25Nb3VzZUVudGVyQmluZFxyXG5cdFx0XHQpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFwibW91c2VsZWF2ZVwiLFxyXG5cdFx0XHRcdHRoaXMub25Nb3VzZUxlYXZlQmluZFxyXG5cdFx0XHQpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnRMaXN0ZW5lci5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFwibW91c2Vtb3ZlXCIsXHJcblx0XHRcdFx0dGhpcy5vbk1vdXNlTW92ZUJpbmRcclxuXHRcdFx0KTtcclxuXHJcblx0XHRcdGlmICh0aGlzLmd5cm9zY29wZSkge1xyXG5cdFx0XHRcdHdpbmRvdy5yZW1vdmVFdmVudExpc3RlbmVyKFxyXG5cdFx0XHRcdFx0XCJkZXZpY2VvcmllbnRhdGlvblwiLFxyXG5cdFx0XHRcdFx0dGhpcy5vbkRldmljZU9yaWVudGF0aW9uQmluZFxyXG5cdFx0XHRcdCk7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGlmICh0aGlzLmdsYXJlIHx8IHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcpIHtcclxuXHRcdFx0XHR3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcihcInJlc2l6ZVwiLCB0aGlzLm9uV2luZG93UmVzaXplQmluZCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRkZXN0cm95KCkge1xyXG5cdFx0XHRjbGVhclRpbWVvdXQodGhpcy50cmFuc2l0aW9uVGltZW91dCk7XHJcblx0XHRcdGlmICh0aGlzLnVwZGF0ZUNhbGwgIT09IG51bGwpIHtcclxuXHRcdFx0XHRjYW5jZWxBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUNhbGwpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnJlc2V0KCk7XHJcblxyXG5cdFx0XHR0aGlzLnJlbW92ZUV2ZW50TGlzdGVuZXJzKCk7XHJcblx0XHRcdHRoaXMuZWxlbWVudC52YW5pbGxhVGlsdCA9IG51bGw7XHJcblx0XHRcdGRlbGV0ZSB0aGlzLmVsZW1lbnQudmFuaWxsYVRpbHQ7XHJcblxyXG5cdFx0XHR0aGlzLmVsZW1lbnQgPSBudWxsO1xyXG5cdFx0fVxyXG5cclxuXHRcdG9uRGV2aWNlT3JpZW50YXRpb24oZXZlbnQpIHtcclxuXHRcdFx0aWYgKGV2ZW50LmdhbW1hID09PSBudWxsIHx8IGV2ZW50LmJldGEgPT09IG51bGwpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHRoaXMudXBkYXRlRWxlbWVudFBvc2l0aW9uKCk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy5neXJvc2NvcGVTYW1wbGVzID4gMCkge1xyXG5cdFx0XHRcdHRoaXMubGFzdGdhbW1hemVybyA9IHRoaXMuZ2FtbWF6ZXJvO1xyXG5cdFx0XHRcdHRoaXMubGFzdGJldGF6ZXJvID0gdGhpcy5iZXRhemVybztcclxuXHJcblx0XHRcdFx0aWYgKHRoaXMuZ2FtbWF6ZXJvID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHR0aGlzLmdhbW1hemVybyA9IGV2ZW50LmdhbW1hO1xyXG5cdFx0XHRcdFx0dGhpcy5iZXRhemVybyA9IGV2ZW50LmJldGE7XHJcblx0XHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHRcdHRoaXMuZ2FtbWF6ZXJvID0gKGV2ZW50LmdhbW1hICsgdGhpcy5sYXN0Z2FtbWF6ZXJvKSAvIDI7XHJcblx0XHRcdFx0XHR0aGlzLmJldGF6ZXJvID0gKGV2ZW50LmJldGEgKyB0aGlzLmxhc3RiZXRhemVybykgLyAyO1xyXG5cdFx0XHRcdH1cclxuXHJcblx0XHRcdFx0dGhpcy5neXJvc2NvcGVTYW1wbGVzIC09IDE7XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdGNvbnN0IHRvdGFsQW5nbGVYID1cclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmd5cm9zY29wZU1heEFuZ2xlWCAtXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5neXJvc2NvcGVNaW5BbmdsZVg7XHJcblx0XHRcdGNvbnN0IHRvdGFsQW5nbGVZID1cclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLmd5cm9zY29wZU1heEFuZ2xlWSAtXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5neXJvc2NvcGVNaW5BbmdsZVk7XHJcblxyXG5cdFx0XHRjb25zdCBkZWdyZWVzUGVyUGl4ZWxYID0gdG90YWxBbmdsZVggLyB0aGlzLndpZHRoO1xyXG5cdFx0XHRjb25zdCBkZWdyZWVzUGVyUGl4ZWxZID0gdG90YWxBbmdsZVkgLyB0aGlzLmhlaWdodDtcclxuXHJcblx0XHRcdGNvbnN0IGFuZ2xlWCA9XHJcblx0XHRcdFx0ZXZlbnQuZ2FtbWEgLVxyXG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmd5cm9zY29wZU1pbkFuZ2xlWCArIHRoaXMuZ2FtbWF6ZXJvKTtcclxuXHRcdFx0Y29uc3QgYW5nbGVZID1cclxuXHRcdFx0XHRldmVudC5iZXRhIC0gKHRoaXMuc2V0dGluZ3MuZ3lyb3Njb3BlTWluQW5nbGVZICsgdGhpcy5iZXRhemVybyk7XHJcblxyXG5cdFx0XHRjb25zdCBwb3NYID0gYW5nbGVYIC8gZGVncmVlc1BlclBpeGVsWDtcclxuXHRcdFx0Y29uc3QgcG9zWSA9IGFuZ2xlWSAvIGRlZ3JlZXNQZXJQaXhlbFk7XHJcblxyXG5cdFx0XHRpZiAodGhpcy51cGRhdGVDYWxsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVDYWxsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5ldmVudCA9IHtcclxuXHRcdFx0XHRjbGllbnRYOiBwb3NYICsgdGhpcy5sZWZ0LFxyXG5cdFx0XHRcdGNsaWVudFk6IHBvc1kgKyB0aGlzLnRvcCxcclxuXHRcdFx0fTtcclxuXHJcblx0XHRcdHRoaXMudXBkYXRlQ2FsbCA9IHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnVwZGF0ZUJpbmQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdG9uTW91c2VFbnRlcigpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVFbGVtZW50UG9zaXRpb24oKTtcclxuXHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLndpbGxDaGFuZ2UgPSBcInRyYW5zZm9ybVwiO1xyXG5cdFx0XHR0aGlzLnNldFRyYW5zaXRpb24oKTtcclxuXHRcdH1cclxuXHJcblx0XHRvbk1vdXNlTW92ZShldmVudCkge1xyXG5cdFx0XHRpZiAodGhpcy51cGRhdGVDYWxsICE9PSBudWxsKSB7XHJcblx0XHRcdFx0Y2FuY2VsQW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVDYWxsKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5ldmVudCA9IGV2ZW50O1xyXG5cdFx0XHR0aGlzLnVwZGF0ZUNhbGwgPSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy51cGRhdGVCaW5kKTtcclxuXHRcdH1cclxuXHJcblx0XHRvbk1vdXNlTGVhdmUoKSB7XHJcblx0XHRcdHRoaXMuc2V0VHJhbnNpdGlvbigpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmVzZXQpIHtcclxuXHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5yZXNldEJpbmQpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmVzZXQoKSB7XHJcblx0XHRcdHRoaXMuZXZlbnQgPSB7XHJcblx0XHRcdFx0Y2xpZW50WDogdGhpcy5sZWZ0ICsgdGhpcy53aWR0aCAvIDIsXHJcblx0XHRcdFx0Y2xpZW50WTogdGhpcy50b3AgKyB0aGlzLmhlaWdodCAvIDIsXHJcblx0XHRcdH07XHJcblxyXG5cdFx0XHRpZiAodGhpcy5lbGVtZW50ICYmIHRoaXMuZWxlbWVudC5zdHlsZSkge1xyXG5cdFx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPVxyXG5cdFx0XHRcdFx0YHBlcnNwZWN0aXZlKCR7dGhpcy5zZXR0aW5ncy5wZXJzcGVjdGl2ZX1weCkgYCArXHJcblx0XHRcdFx0XHRgcm90YXRlWCgwZGVnKSBgICtcclxuXHRcdFx0XHRcdGByb3RhdGVZKDBkZWcpIGAgK1xyXG5cdFx0XHRcdFx0YHNjYWxlM2QoMSwgMSwgMSlgO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLnJlc2V0R2xhcmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXNldEdsYXJlKCkge1xyXG5cdFx0XHRpZiAodGhpcy5nbGFyZSkge1xyXG5cdFx0XHRcdHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLnRyYW5zZm9ybSA9XHJcblx0XHRcdFx0XHRcInJvdGF0ZSgxODBkZWcpIHRyYW5zbGF0ZSgtNTAlLCAtNTAlKVwiO1xyXG5cdFx0XHRcdHRoaXMuZ2xhcmVFbGVtZW50LnN0eWxlLm9wYWNpdHkgPSBcIjBcIjtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdHVwZGF0ZUluaXRpYWxQb3NpdGlvbigpIHtcclxuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc3RhcnRYID09PSAwICYmIHRoaXMuc2V0dGluZ3Muc3RhcnRZID09PSAwKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR0aGlzLm9uTW91c2VFbnRlcigpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcpIHtcclxuXHRcdFx0XHR0aGlzLmV2ZW50ID0ge1xyXG5cdFx0XHRcdFx0Y2xpZW50WDpcclxuXHRcdFx0XHRcdFx0KCh0aGlzLnNldHRpbmdzLnN0YXJ0WCArIHRoaXMuc2V0dGluZ3MubWF4KSAvXHJcblx0XHRcdFx0XHRcdFx0KDIgKiB0aGlzLnNldHRpbmdzLm1heCkpICpcclxuXHRcdFx0XHRcdFx0dGhpcy5jbGllbnRXaWR0aCxcclxuXHRcdFx0XHRcdGNsaWVudFk6XHJcblx0XHRcdFx0XHRcdCgodGhpcy5zZXR0aW5ncy5zdGFydFkgKyB0aGlzLnNldHRpbmdzLm1heCkgL1xyXG5cdFx0XHRcdFx0XHRcdCgyICogdGhpcy5zZXR0aW5ncy5tYXgpKSAqXHJcblx0XHRcdFx0XHRcdHRoaXMuY2xpZW50SGVpZ2h0LFxyXG5cdFx0XHRcdH07XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0dGhpcy5ldmVudCA9IHtcclxuXHRcdFx0XHRcdGNsaWVudFg6XHJcblx0XHRcdFx0XHRcdHRoaXMubGVmdCArXHJcblx0XHRcdFx0XHRcdCgodGhpcy5zZXR0aW5ncy5zdGFydFggKyB0aGlzLnNldHRpbmdzLm1heCkgL1xyXG5cdFx0XHRcdFx0XHRcdCgyICogdGhpcy5zZXR0aW5ncy5tYXgpKSAqXHJcblx0XHRcdFx0XHRcdFx0dGhpcy53aWR0aCxcclxuXHRcdFx0XHRcdGNsaWVudFk6XHJcblx0XHRcdFx0XHRcdHRoaXMudG9wICtcclxuXHRcdFx0XHRcdFx0KCh0aGlzLnNldHRpbmdzLnN0YXJ0WSArIHRoaXMuc2V0dGluZ3MubWF4KSAvXHJcblx0XHRcdFx0XHRcdFx0KDIgKiB0aGlzLnNldHRpbmdzLm1heCkpICpcclxuXHRcdFx0XHRcdFx0XHR0aGlzLmhlaWdodCxcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRsZXQgYmFja3VwU2NhbGUgPSB0aGlzLnNldHRpbmdzLnNjYWxlO1xyXG5cdFx0XHR0aGlzLnNldHRpbmdzLnNjYWxlID0gMTtcclxuXHRcdFx0dGhpcy51cGRhdGUoKTtcclxuXHRcdFx0dGhpcy5zZXR0aW5ncy5zY2FsZSA9IGJhY2t1cFNjYWxlO1xyXG5cdFx0XHR0aGlzLnJlc2V0R2xhcmUoKTtcclxuXHRcdH1cclxuXHJcblx0XHRnZXRWYWx1ZXMoKSB7XHJcblx0XHRcdGxldCB4LCB5O1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuZnVsbFBhZ2VMaXN0ZW5pbmcpIHtcclxuXHRcdFx0XHR4ID0gdGhpcy5ldmVudC5jbGllbnRYIC8gdGhpcy5jbGllbnRXaWR0aDtcclxuXHRcdFx0XHR5ID0gdGhpcy5ldmVudC5jbGllbnRZIC8gdGhpcy5jbGllbnRIZWlnaHQ7XHJcblx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0eCA9ICh0aGlzLmV2ZW50LmNsaWVudFggLSB0aGlzLmxlZnQpIC8gdGhpcy53aWR0aDtcclxuXHRcdFx0XHR5ID0gKHRoaXMuZXZlbnQuY2xpZW50WSAtIHRoaXMudG9wKSAvIHRoaXMuaGVpZ2h0O1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHR4ID0gTWF0aC5taW4oTWF0aC5tYXgoeCwgMCksIDEpO1xyXG5cdFx0XHR5ID0gTWF0aC5taW4oTWF0aC5tYXgoeSwgMCksIDEpO1xyXG5cclxuXHRcdFx0bGV0IHRpbHRYID0gKFxyXG5cdFx0XHRcdHRoaXMucmV2ZXJzZSAqXHJcblx0XHRcdFx0KHRoaXMuc2V0dGluZ3MubWF4IC0geCAqIHRoaXMuc2V0dGluZ3MubWF4ICogMilcclxuXHRcdFx0KS50b0ZpeGVkKDIpO1xyXG5cdFx0XHRsZXQgdGlsdFkgPSAoXHJcblx0XHRcdFx0dGhpcy5yZXZlcnNlICpcclxuXHRcdFx0XHQoeSAqIHRoaXMuc2V0dGluZ3MubWF4ICogMiAtIHRoaXMuc2V0dGluZ3MubWF4KVxyXG5cdFx0XHQpLnRvRml4ZWQoMik7XHJcblx0XHRcdGxldCBhbmdsZSA9XHJcblx0XHRcdFx0TWF0aC5hdGFuMihcclxuXHRcdFx0XHRcdHRoaXMuZXZlbnQuY2xpZW50WCAtICh0aGlzLmxlZnQgKyB0aGlzLndpZHRoIC8gMiksXHJcblx0XHRcdFx0XHQtKHRoaXMuZXZlbnQuY2xpZW50WSAtICh0aGlzLnRvcCArIHRoaXMuaGVpZ2h0IC8gMikpXHJcblx0XHRcdFx0KSAqXHJcblx0XHRcdFx0KDE4MCAvIE1hdGguUEkpO1xyXG5cclxuXHRcdFx0cmV0dXJuIHtcclxuXHRcdFx0XHR0aWx0WDogdGlsdFgsXHJcblx0XHRcdFx0dGlsdFk6IHRpbHRZLFxyXG5cdFx0XHRcdHBlcmNlbnRhZ2VYOiB4ICogMTAwLFxyXG5cdFx0XHRcdHBlcmNlbnRhZ2VZOiB5ICogMTAwLFxyXG5cdFx0XHRcdGFuZ2xlOiBhbmdsZSxcclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHJcblx0XHR1cGRhdGVFbGVtZW50UG9zaXRpb24oKSB7XHJcblx0XHRcdGxldCByZWN0ID0gdGhpcy5lbGVtZW50LmdldEJvdW5kaW5nQ2xpZW50UmVjdCgpO1xyXG5cclxuXHRcdFx0dGhpcy53aWR0aCA9IHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aDtcclxuXHRcdFx0dGhpcy5oZWlnaHQgPSB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0O1xyXG5cdFx0XHR0aGlzLmxlZnQgPSByZWN0LmxlZnQ7XHJcblx0XHRcdHRoaXMudG9wID0gcmVjdC50b3A7XHJcblx0XHR9XHJcblxyXG5cdFx0dXBkYXRlKCkge1xyXG5cdFx0XHRsZXQgdmFsdWVzID0gdGhpcy5nZXRWYWx1ZXMoKTtcclxuXHJcblx0XHRcdHRoaXMuZWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPVxyXG5cdFx0XHRcdFwicGVyc3BlY3RpdmUoXCIgK1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3MucGVyc3BlY3RpdmUgK1xyXG5cdFx0XHRcdFwicHgpIFwiICtcclxuXHRcdFx0XHRcInJvdGF0ZVgoXCIgK1xyXG5cdFx0XHRcdCh0aGlzLnNldHRpbmdzLmF4aXMgPT09IFwieFwiID8gMCA6IHZhbHVlcy50aWx0WSkgK1xyXG5cdFx0XHRcdFwiZGVnKSBcIiArXHJcblx0XHRcdFx0XCJyb3RhdGVZKFwiICtcclxuXHRcdFx0XHQodGhpcy5zZXR0aW5ncy5heGlzID09PSBcInlcIiA/IDAgOiB2YWx1ZXMudGlsdFgpICtcclxuXHRcdFx0XHRcImRlZykgXCIgK1xyXG5cdFx0XHRcdFwic2NhbGUzZChcIiArXHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zY2FsZSArXHJcblx0XHRcdFx0XCIsIFwiICtcclxuXHRcdFx0XHR0aGlzLnNldHRpbmdzLnNjYWxlICtcclxuXHRcdFx0XHRcIiwgXCIgK1xyXG5cdFx0XHRcdHRoaXMuc2V0dGluZ3Muc2NhbGUgK1xyXG5cdFx0XHRcdFwiKVwiO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuZ2xhcmUpIHtcclxuXHRcdFx0XHR0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS50cmFuc2Zvcm0gPSBgcm90YXRlKCR7dmFsdWVzLmFuZ2xlfWRlZykgdHJhbnNsYXRlKC01MCUsIC01MCUpYDtcclxuXHRcdFx0XHR0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS5vcGFjaXR5ID0gYCR7XHJcblx0XHRcdFx0XHQodmFsdWVzLnBlcmNlbnRhZ2VZICogdGhpcy5zZXR0aW5nc1tcIm1heC1nbGFyZVwiXSkgLyAxMDBcclxuXHRcdFx0XHR9YDtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5lbGVtZW50LmRpc3BhdGNoRXZlbnQoXHJcblx0XHRcdFx0bmV3IEN1c3RvbUV2ZW50KFwidGlsdENoYW5nZVwiLCB7XHJcblx0XHRcdFx0XHRkZXRhaWw6IHZhbHVlcyxcclxuXHRcdFx0XHR9KVxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0dGhpcy51cGRhdGVDYWxsID0gbnVsbDtcclxuXHRcdH1cclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEFwcGVuZHMgdGhlIGdsYXJlIGVsZW1lbnQgKGlmIGdsYXJlUHJlcmVuZGVyIGVxdWFscyBmYWxzZSlcclxuXHRcdCAqIGFuZCBzZXRzIHRoZSBkZWZhdWx0IHN0eWxlXHJcblx0XHQgKi9cclxuXHRcdHByZXBhcmVHbGFyZSgpIHtcclxuXHRcdFx0Ly8gSWYgb3B0aW9uIHByZS1yZW5kZXIgaXMgZW5hYmxlZCB3ZSBhc3N1bWUgYWxsIGh0bWwvY3NzIGlzIHByZXNlbnQgZm9yIGFuIG9wdGltYWwgZ2xhcmUgZWZmZWN0LlxyXG5cdFx0XHRpZiAoIXRoaXMuZ2xhcmVQcmVyZW5kZXIpIHtcclxuXHRcdFx0XHQvLyBDcmVhdGUgZ2xhcmUgZWxlbWVudFxyXG5cdFx0XHRcdGNvbnN0IGpzVGlsdEdsYXJlID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcclxuXHRcdFx0XHRqc1RpbHRHbGFyZS5jbGFzc0xpc3QuYWRkKFwianMtdGlsdC1nbGFyZVwiKTtcclxuXHJcblx0XHRcdFx0Y29uc3QganNUaWx0R2xhcmVJbm5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XHJcblx0XHRcdFx0anNUaWx0R2xhcmVJbm5lci5jbGFzc0xpc3QuYWRkKFwianMtdGlsdC1nbGFyZS1pbm5lclwiKTtcclxuXHJcblx0XHRcdFx0anNUaWx0R2xhcmUuYXBwZW5kQ2hpbGQoanNUaWx0R2xhcmVJbm5lcik7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LmFwcGVuZENoaWxkKGpzVGlsdEdsYXJlKTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0dGhpcy5nbGFyZUVsZW1lbnRXcmFwcGVyID1cclxuXHRcdFx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5qcy10aWx0LWdsYXJlXCIpO1xyXG5cdFx0XHR0aGlzLmdsYXJlRWxlbWVudCA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG5cdFx0XHRcdFwiLmpzLXRpbHQtZ2xhcmUtaW5uZXJcIlxyXG5cdFx0XHQpO1xyXG5cclxuXHRcdFx0aWYgKHRoaXMuZ2xhcmVQcmVyZW5kZXIpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdE9iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnRXcmFwcGVyLnN0eWxlLCB7XHJcblx0XHRcdFx0cG9zaXRpb246IFwiYWJzb2x1dGVcIixcclxuXHRcdFx0XHR0b3A6IFwiMFwiLFxyXG5cdFx0XHRcdGxlZnQ6IFwiMFwiLFxyXG5cdFx0XHRcdHdpZHRoOiBcIjEwMCVcIixcclxuXHRcdFx0XHRoZWlnaHQ6IFwiMTAwJVwiLFxyXG5cdFx0XHRcdG92ZXJmbG93OiBcImhpZGRlblwiLFxyXG5cdFx0XHRcdFwicG9pbnRlci1ldmVudHNcIjogXCJub25lXCIsXHJcblx0XHRcdH0pO1xyXG5cclxuXHRcdFx0T2JqZWN0LmFzc2lnbih0aGlzLmdsYXJlRWxlbWVudC5zdHlsZSwge1xyXG5cdFx0XHRcdHBvc2l0aW9uOiBcImFic29sdXRlXCIsXHJcblx0XHRcdFx0dG9wOiBcIjUwJVwiLFxyXG5cdFx0XHRcdGxlZnQ6IFwiNTAlXCIsXHJcblx0XHRcdFx0XCJwb2ludGVyLWV2ZW50c1wiOiBcIm5vbmVcIixcclxuXHRcdFx0XHRcImJhY2tncm91bmQtaW1hZ2VcIjogYGxpbmVhci1ncmFkaWVudCgwZGVnLCByZ2JhKDI1NSwyNTUsMjU1LDApIDAlLCByZ2JhKDI1NSwyNTUsMjU1LDEpIDEwMCUpYCxcclxuXHRcdFx0XHR0cmFuc2Zvcm06IFwicm90YXRlKDE4MGRlZykgdHJhbnNsYXRlKC01MCUsIC01MCUpXCIsXHJcblx0XHRcdFx0XCJ0cmFuc2Zvcm0tb3JpZ2luXCI6IFwiMCUgMCVcIixcclxuXHRcdFx0XHRvcGFjaXR5OiBcIjBcIixcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0XHR0aGlzLnVwZGF0ZUdsYXJlU2l6ZSgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHVwZGF0ZUdsYXJlU2l6ZSgpIHtcclxuXHRcdFx0aWYgKHRoaXMuZ2xhcmUpIHtcclxuXHRcdFx0XHRjb25zdCBnbGFyZVNpemUgPVxyXG5cdFx0XHRcdFx0KHRoaXMuZWxlbWVudC5vZmZzZXRXaWR0aCA+IHRoaXMuZWxlbWVudC5vZmZzZXRIZWlnaHRcclxuXHRcdFx0XHRcdFx0PyB0aGlzLmVsZW1lbnQub2Zmc2V0V2lkdGhcclxuXHRcdFx0XHRcdFx0OiB0aGlzLmVsZW1lbnQub2Zmc2V0SGVpZ2h0KSAqIDI7XHJcblxyXG5cdFx0XHRcdE9iamVjdC5hc3NpZ24odGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUsIHtcclxuXHRcdFx0XHRcdHdpZHRoOiBgJHtnbGFyZVNpemV9cHhgLFxyXG5cdFx0XHRcdFx0aGVpZ2h0OiBgJHtnbGFyZVNpemV9cHhgLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0dXBkYXRlQ2xpZW50U2l6ZSgpIHtcclxuXHRcdFx0dGhpcy5jbGllbnRXaWR0aCA9XHJcblx0XHRcdFx0d2luZG93LmlubmVyV2lkdGggfHxcclxuXHRcdFx0XHRkb2N1bWVudC5kb2N1bWVudEVsZW1lbnQuY2xpZW50V2lkdGggfHxcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsaWVudFdpZHRoO1xyXG5cclxuXHRcdFx0dGhpcy5jbGllbnRIZWlnaHQgPVxyXG5cdFx0XHRcdHdpbmRvdy5pbm5lckhlaWdodCB8fFxyXG5cdFx0XHRcdGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRIZWlnaHQgfHxcclxuXHRcdFx0XHRkb2N1bWVudC5ib2R5LmNsaWVudEhlaWdodDtcclxuXHRcdH1cclxuXHJcblx0XHRvbldpbmRvd1Jlc2l6ZSgpIHtcclxuXHRcdFx0dGhpcy51cGRhdGVHbGFyZVNpemUoKTtcclxuXHRcdFx0dGhpcy51cGRhdGVDbGllbnRTaXplKCk7XHJcblx0XHR9XHJcblxyXG5cdFx0c2V0VHJhbnNpdGlvbigpIHtcclxuXHRcdFx0Y2xlYXJUaW1lb3V0KHRoaXMudHJhbnNpdGlvblRpbWVvdXQpO1xyXG5cdFx0XHR0aGlzLmVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9XHJcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5zcGVlZCArIFwibXMgXCIgKyB0aGlzLnNldHRpbmdzLmVhc2luZztcclxuXHRcdFx0aWYgKHRoaXMuZ2xhcmUpXHJcblx0XHRcdFx0dGhpcy5nbGFyZUVsZW1lbnQuc3R5bGUudHJhbnNpdGlvbiA9IGBvcGFjaXR5ICR7dGhpcy5zZXR0aW5ncy5zcGVlZH1tcyAke3RoaXMuc2V0dGluZ3MuZWFzaW5nfWA7XHJcblxyXG5cdFx0XHR0aGlzLnRyYW5zaXRpb25UaW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdFx0dGhpcy5lbGVtZW50LnN0eWxlLnRyYW5zaXRpb24gPSBcIlwiO1xyXG5cdFx0XHRcdGlmICh0aGlzLmdsYXJlKSB7XHJcblx0XHRcdFx0XHR0aGlzLmdsYXJlRWxlbWVudC5zdHlsZS50cmFuc2l0aW9uID0gXCJcIjtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0sIHRoaXMuc2V0dGluZ3Muc3BlZWQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8qKlxyXG5cdFx0ICogTWV0aG9kIHJldHVybiBwYXRjaGVkIHNldHRpbmdzIG9mIGluc3RhbmNlXHJcblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IHNldHRpbmdzLnJldmVyc2UgLSByZXZlcnNlIHRoZSB0aWx0IGRpcmVjdGlvblxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHNldHRpbmdzLm1heCAtIG1heCB0aWx0IHJvdGF0aW9uIChkZWdyZWVzKVxyXG5cdFx0ICogQHBhcmFtIHtzdGFydFh9IHNldHRpbmdzLnN0YXJ0WCAtIHRoZSBzdGFydGluZyB0aWx0IG9uIHRoZSBYIGF4aXMsIGluIGRlZ3JlZXMuIERlZmF1bHQ6IDBcclxuXHRcdCAqIEBwYXJhbSB7c3RhcnRZfSBzZXR0aW5ncy5zdGFydFkgLSB0aGUgc3RhcnRpbmcgdGlsdCBvbiB0aGUgWSBheGlzLCBpbiBkZWdyZWVzLiBEZWZhdWx0OiAwXHJcblx0XHQgKiBAcGFyYW0ge251bWJlcn0gc2V0dGluZ3MucGVyc3BlY3RpdmUgLSBUcmFuc2Zvcm0gcGVyc3BlY3RpdmUsIHRoZSBsb3dlciB0aGUgbW9yZSBleHRyZW1lIHRoZSB0aWx0IGdldHNcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfSBzZXR0aW5ncy5lYXNpbmcgLSBFYXNpbmcgb24gZW50ZXIvZXhpdFxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHNldHRpbmdzLnNjYWxlIC0gMiA9IDIwMCUsIDEuNSA9IDE1MCUsIGV0Yy4uXHJcblx0XHQgKiBAcGFyYW0ge251bWJlcn0gc2V0dGluZ3Muc3BlZWQgLSBTcGVlZCBvZiB0aGUgZW50ZXIvZXhpdCB0cmFuc2l0aW9uXHJcblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IHNldHRpbmdzLnRyYW5zaXRpb24gLSBTZXQgYSB0cmFuc2l0aW9uIG9uIGVudGVyL2V4aXRcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfG51bGx9IHNldHRpbmdzLmF4aXMgLSBXaGF0IGF4aXMgc2hvdWxkIGJlIGRpc2FibGVkLiBDYW4gYmUgWCBvciBZXHJcblx0XHQgKiBAcGFyYW0ge2Jvb2xlYW59IHNldHRpbmdzLmdsYXJlIC0gV2hhdCBheGlzIHNob3VsZCBiZSBkaXNhYmxlZC4gQ2FuIGJlIFggb3IgWVxyXG5cdFx0ICogQHBhcmFtIHtudW1iZXJ9IHNldHRpbmdzLm1heC1nbGFyZSAtIHRoZSBtYXhpbXVtIFwiZ2xhcmVcIiBvcGFjaXR5ICgxID0gMTAwJSwgMC41ID0gNTAlKVxyXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBzZXR0aW5ncy5nbGFyZS1wcmVyZW5kZXIgLSBmYWxzZSA9IFZhbmlsbGFUaWx0IGNyZWF0ZXMgdGhlIGdsYXJlIGVsZW1lbnRzIGZvciB5b3UsIG90aGVyd2lzZVxyXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBzZXR0aW5ncy5mdWxsLXBhZ2UtbGlzdGVuaW5nIC0gSWYgdHJ1ZSwgcGFyYWxsYXggZWZmZWN0IHdpbGwgbGlzdGVuIHRvIG1vdXNlIG1vdmUgZXZlbnRzIG9uIHRoZSB3aG9sZSBkb2N1bWVudCwgbm90IG9ubHkgdGhlIHNlbGVjdGVkIGVsZW1lbnRcclxuXHRcdCAqIEBwYXJhbSB7c3RyaW5nfG9iamVjdH0gc2V0dGluZ3MubW91c2UtZXZlbnQtZWxlbWVudCAtIFN0cmluZyBzZWxlY3RvciBvciBsaW5rIHRvIEhUTUwtZWxlbWVudCB3aGF0IHdpbGwgYmUgbGlzdGVuIG1vdXNlIGV2ZW50c1xyXG5cdFx0ICogQHBhcmFtIHtib29sZWFufSBzZXR0aW5ncy5yZXNldCAtIGZhbHNlID0gSWYgdGhlIHRpbHQgZWZmZWN0IGhhcyB0byBiZSByZXNldCBvbiBleGl0XHJcblx0XHQgKiBAcGFyYW0ge2d5cm9zY29wZX0gc2V0dGluZ3MuZ3lyb3Njb3BlIC0gRW5hYmxlIHRpbHRpbmcgYnkgZGV2aWNlb3JpZW50YXRpb24gZXZlbnRzXHJcblx0XHQgKiBAcGFyYW0ge2d5cm9zY29wZVNlbnNpdGl2aXR5fSBzZXR0aW5ncy5neXJvc2NvcGVTZW5zaXRpdml0eSAtIEJldHdlZW4gMCBhbmQgMSAtIFRoZSBhbmdsZSBhdCB3aGljaCBtYXggdGlsdCBwb3NpdGlvbiBpcyByZWFjaGVkLiAxID0gOTBkZWcsIDAuNSA9IDQ1ZGVnLCBldGMuLlxyXG5cdFx0ICogQHBhcmFtIHtneXJvc2NvcGVTYW1wbGVzfSBzZXR0aW5ncy5neXJvc2NvcGVTYW1wbGVzIC0gSG93IG1hbnkgZ3lyb3Njb3BlIG1vdmVzIHRvIGRlY2lkZSB0aGUgc3RhcnRpbmcgcG9zaXRpb24uXHJcblx0XHQgKi9cclxuXHRcdGV4dGVuZFNldHRpbmdzKHNldHRpbmdzKSB7XHJcblx0XHRcdGxldCBkZWZhdWx0U2V0dGluZ3MgPSB7XHJcblx0XHRcdFx0cmV2ZXJzZTogZmFsc2UsXHJcblx0XHRcdFx0bWF4OiAxNSxcclxuXHRcdFx0XHRzdGFydFg6IDAsXHJcblx0XHRcdFx0c3RhcnRZOiAwLFxyXG5cdFx0XHRcdHBlcnNwZWN0aXZlOiAxMDAwLFxyXG5cdFx0XHRcdGVhc2luZzogXCJjdWJpYy1iZXppZXIoLjAzLC45OCwuNTIsLjk5KVwiLFxyXG5cdFx0XHRcdHNjYWxlOiAxLFxyXG5cdFx0XHRcdHNwZWVkOiAzMDAsXHJcblx0XHRcdFx0dHJhbnNpdGlvbjogdHJ1ZSxcclxuXHRcdFx0XHRheGlzOiBudWxsLFxyXG5cdFx0XHRcdGdsYXJlOiBmYWxzZSxcclxuXHRcdFx0XHRcIm1heC1nbGFyZVwiOiAxLFxyXG5cdFx0XHRcdFwiZ2xhcmUtcHJlcmVuZGVyXCI6IGZhbHNlLFxyXG5cdFx0XHRcdFwiZnVsbC1wYWdlLWxpc3RlbmluZ1wiOiBmYWxzZSxcclxuXHRcdFx0XHRcIm1vdXNlLWV2ZW50LWVsZW1lbnRcIjogbnVsbCxcclxuXHRcdFx0XHRyZXNldDogdHJ1ZSxcclxuXHRcdFx0XHRneXJvc2NvcGU6IHRydWUsXHJcblx0XHRcdFx0Z3lyb3Njb3BlTWluQW5nbGVYOiAtNDUsXHJcblx0XHRcdFx0Z3lyb3Njb3BlTWF4QW5nbGVYOiA0NSxcclxuXHRcdFx0XHRneXJvc2NvcGVNaW5BbmdsZVk6IC00NSxcclxuXHRcdFx0XHRneXJvc2NvcGVNYXhBbmdsZVk6IDQ1LFxyXG5cdFx0XHRcdGd5cm9zY29wZVNhbXBsZXM6IDEwLFxyXG5cdFx0XHR9O1xyXG5cclxuXHRcdFx0bGV0IG5ld1NldHRpbmdzID0ge307XHJcblx0XHRcdGZvciAodmFyIHByb3BlcnR5IGluIGRlZmF1bHRTZXR0aW5ncykge1xyXG5cdFx0XHRcdGlmIChwcm9wZXJ0eSBpbiBzZXR0aW5ncykge1xyXG5cdFx0XHRcdFx0bmV3U2V0dGluZ3NbcHJvcGVydHldID0gc2V0dGluZ3NbcHJvcGVydHldO1xyXG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5lbGVtZW50Lmhhc0F0dHJpYnV0ZShcImRhdGEtdGlsdC1cIiArIHByb3BlcnR5KSkge1xyXG5cdFx0XHRcdFx0bGV0IGF0dHJpYnV0ZSA9IHRoaXMuZWxlbWVudC5nZXRBdHRyaWJ1dGUoXHJcblx0XHRcdFx0XHRcdFwiZGF0YS10aWx0LVwiICsgcHJvcGVydHlcclxuXHRcdFx0XHRcdCk7XHJcblx0XHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0XHRuZXdTZXR0aW5nc1twcm9wZXJ0eV0gPSBKU09OLnBhcnNlKGF0dHJpYnV0ZSk7XHJcblx0XHRcdFx0XHR9IGNhdGNoIChlKSB7XHJcblx0XHRcdFx0XHRcdG5ld1NldHRpbmdzW3Byb3BlcnR5XSA9IGF0dHJpYnV0ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0bmV3U2V0dGluZ3NbcHJvcGVydHldID0gZGVmYXVsdFNldHRpbmdzW3Byb3BlcnR5XTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHJcblx0XHRcdHJldHVybiBuZXdTZXR0aW5ncztcclxuXHRcdH1cclxuXHJcblx0XHRzdGF0aWMgaW5pdChlbGVtZW50cywgc2V0dGluZ3MpIHtcclxuXHRcdFx0aWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgTm9kZSkge1xyXG5cdFx0XHRcdGVsZW1lbnRzID0gW2VsZW1lbnRzXTtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0aWYgKGVsZW1lbnRzIGluc3RhbmNlb2YgTm9kZUxpc3QpIHtcclxuXHRcdFx0XHRlbGVtZW50cyA9IFtdLnNsaWNlLmNhbGwoZWxlbWVudHMpO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHRpZiAoIShlbGVtZW50cyBpbnN0YW5jZW9mIEFycmF5KSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0ZWxlbWVudHMuZm9yRWFjaCgoZWxlbWVudCkgPT4ge1xyXG5cdFx0XHRcdGlmICghKFwidmFuaWxsYVRpbHRcIiBpbiBlbGVtZW50KSkge1xyXG5cdFx0XHRcdFx0ZWxlbWVudC52YW5pbGxhVGlsdCA9IG5ldyBWYW5pbGxhVGlsdChlbGVtZW50LCBzZXR0aW5ncyk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGlmICh0eXBlb2YgZG9jdW1lbnQgIT09IFwidW5kZWZpbmVkXCIpIHtcclxuXHRcdC8qIGV4cG9zZSB0aGUgY2xhc3MgdG8gd2luZG93ICovXHJcblx0XHR3aW5kb3cuVmFuaWxsYVRpbHQgPSBWYW5pbGxhVGlsdDtcclxuXHJcblx0XHQvKipcclxuXHRcdCAqIEF1dG8gbG9hZFxyXG5cdFx0ICovXHJcblx0XHRWYW5pbGxhVGlsdC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCJbZGF0YS10aWx0XVwiKSk7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gVmFuaWxsYVRpbHQ7XHJcbn0pKCk7XHJcbiJdfQ==
